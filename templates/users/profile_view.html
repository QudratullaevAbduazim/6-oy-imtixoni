{% extends 'base.html' %}
{% load static %}

{% block content %}
<div class="row justify-content-center py-5">
    <div class="col-md-7 col-lg-5">
        <div class="card shadow-lg border-0 overflow-hidden animate-slideUp" style="border-radius: 24px;">
            <div class="profile-header" style="height: 120px; background: linear-gradient(135deg, #4e54c8, #8f94fb);"></div>
            
            <div class="card-body text-center p-4" style="margin-top: -75px;">
                <div class="position-relative d-inline-block mb-3">
                    {% if user.profile.avatar %}
                        <img src="{{ user.profile.avatar.url }}" class="rounded-circle border border-4 border-white shadow-sm" width="140" height="140" style="object-fit: cover;">
                    {% else %}
                        <img src="{% static 'img/default.png' %}" class="rounded-circle border border-4 border-white shadow-sm" width="140" height="140" style="object-fit: cover;">
                    {% endif %}
                    
                    <span class="position-absolute bottom-0 end-0 bg-success border border-2 border-white rounded-circle p-2 m-2 shadow"></span>
                </div>

                <h3 class="fw-bold text-dark mb-1">{{ user.first_name }} {{ user.last_name|default:user.username }}</h3>
                <p class="text-muted mb-4 small"><i class="fas fa-envelope me-1"></i> {{ user.email }}</p>
                
                <div class="row g-3 mb-4">
                    <div class="col-6">
                        <div class="p-3 bg-light rounded-4 border border-white shadow-sm">
                            <i class="fas fa-language text-primary mb-2"></i>
                            <small class="text-muted d-block lh-1 mb-1">Til</small>
                            <span class="fw-bold small">{{ user.profile.get_language_display }}</span>
                        </div>
                    </div>
                    <div class="col-6">
                        <div class="p-3 bg-light rounded-4 border border-white shadow-sm">
                            <i class="fas fa-coins text-warning mb-2"></i>
                            <small class="text-muted d-block lh-1 mb-1">Valyuta</small>
                            <span class="fw-bold small">{{ user.profile.preferred_currency }}</span>
                        </div>
                    </div>
                </div>

                <div class="d-grid gap-2">
                    <a href="{% url 'profile_update' %}" class="btn btn-primary btn-lg rounded-pill shadow-sm py-2 fs-6">
                        <i class="fas fa-user-edit me-2"></i>Profilni tahrirlash
                    </a>
                    <a href="{% url 'password_change' %}" class="btn btn-light border btn-lg rounded-pill py-2 fs-6">
                        <i class="fas fa-key me-2"></i>Parolni o'zgartirish
                    </a>
                </div>
            </div>
            
            <div class="card-footer bg-white border-0 text-center pb-4">
                <small class="text-muted italic">A'zo bo'lgan sana: {{ user.date_joined|date:"d F, Y" }}</small>
            </div>
        </div>
    </div>
</div>

<style>
    .animate-slideUp {
        animation: slideUp 0.6s ease-out;
    }
    
    @keyframes slideUp {
        from { opacity: 0; transform: translateY(30px); }
        to { opacity: 1; transform: translateY(0); }
    }

    .btn-primary {
        background: linear-gradient(135deg, #4e54c8, #667eea);
        border: none;
    }
    
    .btn-primary:hover {
        background: linear-gradient(135deg, #3f44a3, #4e54c8);
        transform: translateY(-2px);
        box-shadow: 0 5px 15px rgba(78, 84, 200, 0.3) !important;
    }
</style>
{% endblock %}